CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    full_name VARCHAR(100) NOT NULL,
    role ENUM('admin','assessor') NOT NULL
);

CREATE TABLE students (
    student_id VARCHAR(20) PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    student_name VARCHAR(100) NOT NULL,   
    programme_id VARCHAR(10) NOT NULL,
    current_year INT NOT NULL,
    
    FOREIGN KEY (programme_id) REFERENCES programmes(programme_id)
    ON DELETE RESTRICT
);

CREATE TABLE internships (
    internship_id INT AUTO_INCREMENT PRIMARY KEY,
    student_id VARCHAR(20) NOT NULL,
    assessor_id INT NOT NULL,
    company_name VARCHAR(150),
    start_date DATE,
    end_date DATE,

    FOREIGN KEY (student_id) REFERENCES students(student_id),
    FOREIGN KEY (assessor_id) REFERENCES users(user_id)
);

CREATE TABLE assessments (
    assessment_id INT AUTO_INCREMENT PRIMARY KEY,
    
    internship_id INT NOT NULL UNIQUE,
    
    undertaking_tasks DECIMAL(4,2) NOT NULL,
    health_safety DECIMAL(4,2) NOT NULL,
    theory_use DECIMAL(4,2) NOT NULL,
    report_presentation DECIMAL(4,2) NOT NULL,
    language_clarity DECIMAL(4,2) NOT NULL,
    lifelong_learning DECIMAL(4,2) NOT NULL,
    project_management DECIMAL(4,2) NOT NULL,
    time_management DECIMAL(4,2) NOT NULL,
    
    final_score DECIMAL(5,2) NOT NULL,
    
    comments TEXT,
    
    FOREIGN KEY (internship_id) REFERENCES internships(internship_id)
    ON DELETE CASCADE
);

CREATE TABLE programmes (
    programme_id VARCHAR(10) PRIMARY KEY,
    programme_name VARCHAR(100) NOT NULL
);